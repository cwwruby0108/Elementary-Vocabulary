<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å…­è‹±æ–‡å–®å­—ç‹</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* ç¿»ç‰Œå‹•ç•«ç›¸é—œ CSS */
        .perspective-1000 {
            perspective: 1000px;
        }
        .preserve-3d {
            transform-style: preserve-3d;
        }
        .backface-hidden {
            backface-visibility: hidden;
        }
        .rotate-y-180 {
            transform: rotateY(180deg);
        }
        
        /* ç°¡å–®çš„å‹•ç•«å®šç¾© */
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
            animation: spin-slow 8s linear infinite;
        }
        
        @keyframes bounce-in {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-bounce-in {
            animation: bounce-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.5s ease-out forwards;
        }
        
        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-indigo-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- åœ–ç¤ºçµ„ä»¶ (SVG) ---
        const Icon = ({ children, className, size = 24, ...props }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className} 
                {...props}
            >
                {children}
            </svg>
        );

        const Volume2 = (props) => <Icon {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></Icon>;
        const ChevronLeft = (props) => <Icon {...props}><polyline points="15 18 9 12 15 6"></polyline></Icon>;
        const ChevronRight = (props) => <Icon {...props}><polyline points="9 18 15 12 9 6"></polyline></Icon>;
        const BookOpen = (props) => <Icon {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const Gamepad2 = (props) => <Icon {...props}><line x1="6" y1="11" x2="10" y2="11"></line><line x1="8" y1="9" x2="8" y2="13"></line><line x1="15" y1="12" x2="15.01" y2="12"></line><line x1="18" y1="10" x2="18.01" y2="10"></line><path d="M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"></path></Icon>;
        const ListIcon = (props) => <Icon {...props}><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></Icon>;
        const Star = (props) => <Icon {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></Icon>;
        const RefreshCcw = (props) => <Icon {...props}><polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path></Icon>;
        const CheckCircle = (props) => <Icon {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></Icon>;
        const XCircle = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></Icon>;
        const Trophy = (props) => <Icon {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17"></path><path d="M14 14.66V17"></path><path d="M12 22a7 7 0 0 0 7-7H5a7 7 0 0 0 7 7z"></path><path d="M8 2h8"></path></Icon>;
        const Search = (props) => <Icon {...props}><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></Icon>;
        const Filter = (props) => <Icon {...props}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></Icon>;

        // --- è³‡æ–™åº« ---
        const fullVocabularyData = [
            // Part 1
            { id: 1, part: 1, word: "ball", meaning: "çƒ", sentence: "Let's play ball.", trans: "ä¾†ç©çƒå§ã€‚", emoji: "ğŸ€" },
            { id: 2, part: 1, word: "baseball", meaning: "æ£’çƒ", sentence: "He likes to play baseball.", trans: "ä»–æ„›æ‰“æ£’çƒã€‚", emoji: "âš¾" },
            { id: 3, part: 1, word: "basketball", meaning: "ç±ƒçƒ", sentence: "He plays basketball everyday.", trans: "ä»–æ¯å¤©æ‰“ç±ƒçƒã€‚", emoji: "ğŸ€" },
            { id: 4, part: 1, word: "morning", meaning: "æ—©ä¸Š", sentence: "Good morning, Mr. Wang.", trans: "ç‹å…ˆç”Ÿ,æ—©å®‰ã€‚", emoji: "ğŸŒ…" },
            { id: 5, part: 1, word: "afternoon", meaning: "ä¸‹åˆ", sentence: "Good afternoon, Mrs. Wang.", trans: "ç‹å¤ªå¤ª,åˆå®‰ã€‚", emoji: "â˜€ï¸" },
            { id: 6, part: 1, word: "evening", meaning: "å‚æ™š", sentence: "Good evening, Mrs. Wang.", trans: "ç‹å¥³å£«,æ™šå®‰ã€‚", emoji: "ğŸŒ‡" },
            { id: 7, part: 1, word: "climb", meaning: "çˆ¬", sentence: "My mom likes to go mountain climbing.", trans: "æˆ‘åª½åª½å–œæ­¡çˆ¬å±±ã€‚", emoji: "ğŸ§—" },
            { id: 8, part: 1, word: "dance", meaning: "è·³èˆ", sentence: "She can dance.", trans: "å¥¹æœƒè·³èˆã€‚", emoji: "ğŸ’ƒ" },
            { id: 9, part: 1, word: "draw", meaning: "ç•«åœ–", sentence: "She draws very well.", trans: "å¥¹å¾ˆæœƒç•«åœ–ã€‚", emoji: "ğŸ¨" },
            { id: 10, part: 1, word: "exercise", meaning: "é‹å‹•", sentence: "I need to exercise more.", trans: "æˆ‘éœ€è¦å¤šé‹å‹•ã€‚", emoji: "ğŸƒ" },

            // Part 2
            { id: 11, part: 2, word: "comic", meaning: "æ¼«ç•«æ›¸", sentence: "I have a new comic book.", trans: "æˆ‘æœ‰ä¸€æœ¬æ–°æ¼«ç•«æ›¸ã€‚", emoji: "ğŸ“š" },
            { id: 12, part: 2, word: "fun", meaning: "æœ‰è¶£", sentence: "It is fun!", trans: "å¥½å¥½ç©!", emoji: "ğŸ˜„" },
            { id: 13, part: 2, word: "game", meaning: "éŠæˆ²", sentence: "Nobody wants to play games with me.", trans: "æ²’æœ‰äººè¦è·Ÿæˆ‘ç©éŠæˆ²ã€‚", emoji: "ğŸ®" },
            { id: 14, part: 2, word: "doll", meaning: "æ´‹å¨ƒå¨ƒ", sentence: "You have many dolls.", trans: "ä½ æœ‰å¥½å¤šæ´‹å¨ƒå¨ƒã€‚", emoji: "ğŸ§¸" },
            { id: 15, part: 2, word: "interest", meaning: "èˆˆè¶£", sentence: "He has many interests.", trans: "ä»–æœ‰å¾ˆå¤šèˆˆè¶£ã€‚", emoji: "â¤ï¸" },
            { id: 16, part: 2, word: "joy", meaning: "å–œæ‚¦", sentence: "My heart is full of joy.", trans: "æˆ‘å¿ƒå……æ»¿æ­¡å–œã€‚", emoji: "ğŸ¥³" },
            { id: 17, part: 2, word: "kite", meaning: "é¢¨ç®", sentence: "We are playing kites.", trans: "æˆ‘å€‘æ­£åœ¨æ”¾é¢¨ç®ã€‚", emoji: "ğŸª" },
            { id: 18, part: 2, word: "movie", meaning: "é›»å½±", sentence: "Let's see a movie!", trans: "å»çœ‹é›»å½±å§!", emoji: "ğŸ¬" },
            { id: 19, part: 2, word: "music", meaning: "éŸ³æ¨‚", sentence: "He likes to listen to the music.", trans: "ä»–æ„›è½éŸ³æ¨‚ã€‚", emoji: "ğŸµ" },
            { id: 20, part: 2, word: "paint", meaning: "ç¹ªç•«", sentence: "You are painting.", trans: "ä½ æ­£åœ¨ç•«ç•«ã€‚", emoji: "ğŸ–Œï¸" },

            // Part 3
            { id: 21, part: 3, word: "piano", meaning: "é‹¼ç´", sentence: "You can't play the piano.", trans: "ä½ ä¸æœƒå½ˆé‹¼ç´ã€‚", emoji: "ğŸ¹" },
            { id: 22, part: 3, word: "play", meaning: "ç©", sentence: "Let's go out and play.", trans: "æˆ‘å€‘å‡ºå»ç©å§ã€‚", emoji: "ğŸ›" },
            { id: 23, part: 3, word: "player", meaning: "é¸æ‰‹", sentence: "He is a baseball player.", trans: "ä»–æ˜¯æ£’çƒé¸æ‰‹ã€‚", emoji: "ğŸ§¢" },
            { id: 24, part: 3, word: "run", meaning: "è·‘æ­¥", sentence: "Run!", trans: "å¿«è·‘!", emoji: "ğŸƒ" },
            { id: 25, part: 3, word: "shop", meaning: "è³¼ç‰©", sentence: "He likes to go shopping.", trans: "ä»–å¾ˆæ„›è³¼ç‰©ã€‚", emoji: "ğŸ›ï¸" },
            { id: 26, part: 3, word: "sing", meaning: "å”±æ­Œ", sentence: "I don't know how to sing.", trans: "æˆ‘ä¸çŸ¥é“æ€éº¼å”±æ­Œã€‚", emoji: "ğŸ¤" },
            { id: 27, part: 3, word: "swim", meaning: "æ¸¸æ³³", sentence: "Can he swim?", trans: "ä»–æœƒæ¸¸æ³³å—?", emoji: "ğŸŠ" },
            { id: 28, part: 3, word: "song", meaning: "æ­Œ", sentence: "I love this song.", trans: "æˆ‘æ„›é€™é¦–æ­Œã€‚", emoji: "ğŸ¶" },
            { id: 29, part: 3, word: "sport", meaning: "é‹å‹•", sentence: "Soccer is your favorite sport.", trans: "è¶³çƒæ˜¯ä½ æœ€æ„›çš„é‹å‹•ã€‚", emoji: "âš½" },
            { id: 30, part: 3, word: "toy", meaning: "ç©å…·", sentence: "Kids like toys.", trans: "å°å­©éƒ½å–œæ­¡ç©å…·ã€‚", emoji: "ğŸ¤–" },

            // Part 4
            { id: 31, part: 4, word: "win", meaning: "è´", sentence: "You win again.", trans: "ä½ åˆè´äº†ã€‚", emoji: "ğŸ†" },
            { id: 32, part: 4, word: "bathroom", meaning: "å»æ‰€", sentence: "May I go to the bathroom?", trans: "æˆ‘å¯ä»¥å»ä¸Šå»æ‰€å—?", emoji: "ğŸš½" },
            { id: 33, part: 4, word: "bedroom", meaning: "è‡¥æˆ¿", sentence: "My mother wants me to clean up my bedroom right now.", trans: "æˆ‘åª½è¦æˆ‘é¦¬ä¸Šæ‰“æƒè‡¥å®¤ã€‚", emoji: "ğŸ›ï¸" },
            { id: 34, part: 4, word: "dining room", meaning: "é£¯å»³", sentence: "She is in the dining room.", trans: "å¥¹åœ¨é£¯å»³ã€‚", emoji: "ğŸ½ï¸" },
            { id: 35, part: 4, word: "home", meaning: "å®¶", sentence: "Home is where the heart is.", trans: "å®¶å°±æ˜¯å¿ƒä¹‹æ‰€åœ¨ã€‚", emoji: "ğŸ " },
            { id: 36, part: 4, word: "house", meaning: "æˆ¿å­", sentence: "They live in a small house.", trans: "ä»–å€‘ä½åœ¨å°æˆ¿å­è£¡ã€‚", emoji: "ğŸ¡" },
            { id: 37, part: 4, word: "kitchen", meaning: "å»šæˆ¿", sentence: "Where is the kitchen?", trans: "å»šæˆ¿åœ¨å“ªè£¡?", emoji: "ğŸ‘¨â€ğŸ³" },
            { id: 38, part: 4, word: "living room", meaning: "å®¢å»³", sentence: "The living room is so big.", trans: "é€™é–“å®¢å»³å¥½å¤§ã€‚", emoji: "ğŸ›‹ï¸" },
            { id: 39, part: 4, word: "room", meaning: "æˆ¿é–“", sentence: "Go back to your room.", trans: "å›ä½ çš„æˆ¿é–“ã€‚", emoji: "ğŸšª" },
            { id: 40, part: 4, word: "study", meaning: "å­¸ç¿’", sentence: "She likes to study English.", trans: "å¥¹å–œæ­¡å­¸ç¿’è‹±æ–‡ã€‚", emoji: "ğŸ“–" },

            // Part 5
            { id: 41, part: 5, word: "window", meaning: "çª—æˆ¶", sentence: "Please keep the windows open.", trans: "è«‹è®“çª—æˆ¶é–‹è‘—ã€‚", emoji: "ğŸªŸ" },
            { id: 42, part: 5, word: "bed", meaning: "åºŠ", sentence: "Time to go to bed.", trans: "è©²ä¸ŠåºŠç¡è¦ºäº†ã€‚", emoji: "ğŸ›Œ" },
            { id: 43, part: 5, word: "chair", meaning: "æ¤…å­", sentence: "The chair is broken.", trans: "é€™æ¤…å­å£äº†ã€‚", emoji: "ğŸª‘" },
            { id: 44, part: 5, word: "desk", meaning: "æ›¸æ¡Œ", sentence: "Please read at your desk.", trans: "è«‹åˆ°ä½ çš„æ›¸æ¡Œé‚£é‚Šè®€æ›¸ã€‚", emoji: "ğŸªµ" },
            { id: 45, part: 5, word: "sofa", meaning: "æ²™ç™¼", sentence: "Please sit on the sofa.", trans: "è«‹ååœ¨æ²™ç™¼ä¸Šã€‚", emoji: "ğŸ›‹ï¸" },
            { id: 46, part: 5, word: "table", meaning: "æ¡Œå­", sentence: "The table is green.", trans: "é€™å¼µæ¡Œå­æ˜¯ç¶ è‰²çš„ã€‚", emoji: "ğŸªµ" },
            { id: 47, part: 5, word: "camera", meaning: "ç›¸æ©Ÿ", sentence: "My father has two digital cameras.", trans: "æˆ‘çˆ¸æœ‰å…©å°æ•¸ä½ç›¸æ©Ÿã€‚", emoji: "ğŸ“·" },
            { id: 48, part: 5, word: "computer", meaning: "é›»è…¦", sentence: "My older brother has a new computer.", trans: "æˆ‘å“¥å“¥æœ‰ä¸€å°æ–°é›»è…¦ã€‚", emoji: "ğŸ’»" },
            { id: 49, part: 5, word: "friend", meaning: "æœ‹å‹", sentence: "We all need friends.", trans: "äººéƒ½éœ€è¦æœ‹å‹ã€‚", emoji: "ğŸ¤" },
            { id: 50, part: 5, word: "radio", meaning: "æ”¶éŸ³æ©Ÿ", sentence: "Turn on the radio.", trans: "æ‰“é–‹æ”¶éŸ³æ©Ÿã€‚", emoji: "ğŸ“»" },

            // Part 6
            { id: 51, part: 6, word: "telephone", meaning: "é›»è©±", sentence: "You can use my telephone.", trans: "ä½ å¯ä»¥ç”¨æˆ‘çš„é›»è©±ã€‚", emoji: "â˜ï¸" },
            { id: 52, part: 6, word: "television", meaning: "é›»è¦–", sentence: "They watch too much television.", trans: "ä»–å€‘çœ‹å¤ªå¤šé›»è¦–äº†ã€‚", emoji: "ğŸ“º" },
            { id: 53, part: 6, word: "video", meaning: "éŒ„å½±å¸¶/å½±ç‰‡", sentence: "We go to the video store every week.", trans: "æˆ‘å€‘æ¯é€±éƒ½å»éŒ„å½±å¸¶åº—ã€‚", emoji: "ğŸ“¼" },
            { id: 54, part: 6, word: "blackboard", meaning: "é»‘æ¿", sentence: "The teacher is writing on the blackboard.", trans: "è€å¸«æ­£åœ¨é»‘æ¿ä¸Šå¯«å­—ã€‚", emoji: "ğŸ§‘â€ğŸ«" },
            { id: 55, part: 6, word: "classroom", meaning: "æ•™å®¤", sentence: "Please be quiet in the classroom.", trans: "æ•™å®¤å…§è«‹ä¿æŒå®‰éœã€‚", emoji: "ğŸ‘©â€ğŸ«" },
            { id: 56, part: 6, word: "elementary school", meaning: "åœ‹å°", sentence: "Welcome to Nan-Shi elementary school.", trans: "æ­¡è¿ä¾†åˆ°å—å‹¢åœ‹å°ã€‚", emoji: "ğŸ«" },
            { id: 57, part: 6, word: "grade", meaning: "å¹´ç´š", sentence: "I'm in the sixth grade this year.", trans: "æˆ‘ä»Šå¹´å…­å¹´ç´šã€‚", emoji: "6ï¸âƒ£" },
            { id: 58, part: 6, word: "school", meaning: "å­¸æ ¡", sentence: "I go to school at 7 o'clock.", trans: "æˆ‘ä¸ƒé»ä¸Šå­¸ã€‚", emoji: "ğŸ’" },
            { id: 59, part: 6, word: "book", meaning: "æ›¸", sentence: "He has many books.", trans: "ä»–æœ‰å¾ˆå¤šæ›¸ã€‚", emoji: "ğŸ“š" },
            { id: 60, part: 6, word: "dictionary", meaning: "å­—å…¸", sentence: "He can look up words in the dictionary.", trans: "ä»–æœƒæŸ¥å­—å…¸ã€‚", emoji: "ğŸ“–" },

            // Part 7
            { id: 61, part: 7, word: "eraser", meaning: "æ©¡çš®æ“¦", sentence: "May I use your eraser?", trans: "ä½ çš„æ©¡çš®æ“¦å¯ä»¥å€Ÿæˆ‘å—?", emoji: "ğŸ§¼" },
            { id: 62, part: 7, word: "paper", meaning: "ç´™", sentence: "I need a piece of paper.", trans: "æˆ‘éœ€è¦ä¸€å¼µç´™ã€‚", emoji: "ğŸ“„" },
            { id: 63, part: 7, word: "pen", meaning: "ç­†", sentence: "She doesn't have a red pen.", trans: "å¥¹æ²’æœ‰ç´…ç­†ã€‚", emoji: "ğŸ–Šï¸" },
            { id: 64, part: 7, word: "pencil", meaning: "é‰›ç­†", sentence: "She has ten pencils.", trans: "å¥¹æœ‰åæ”¯é‰›ç­†ã€‚", emoji: "âœï¸" },
            { id: 65, part: 7, word: "ruler", meaning: "å°º", sentence: "You need a ruler to draw a line.", trans: "ä½ ç•«ç·šè¦ç”¨å°ºã€‚", emoji: "ğŸ“" },
            { id: 66, part: 7, word: "tape", meaning: "è† å¸¶", sentence: "We need the tape to seal the box.", trans: "æˆ‘å€‘éœ€è¦è† å¸¶å°ç®±ã€‚", emoji: "ğŸ©¹" },
            { id: 67, part: 7, word: "workbook", meaning: "ç¿’ä½œæœ¬", sentence: "Please open your workbooks to page 1.", trans: "è«‹æ‰“é–‹ç¿’ä½œç¬¬ä¸€é ã€‚", emoji: "ğŸ““" },
            { id: 68, part: 7, word: "art", meaning: "è—è¡“", sentence: "You have three art classes every week.", trans: "ä½ å€‘æ¯é€±æœ‰ä¸‰å ‚ç¾è¡“èª²ã€‚", emoji: "ğŸ¨" },
            { id: 69, part: 7, word: "class", meaning: "èª²/ç­ç´š", sentence: "My favorite class is English.", trans: "æˆ‘æœ€å–œæ­¡è‹±æ–‡èª²ã€‚", emoji: "ğŸ«" },
            { id: 70, part: 7, word: "math", meaning: "æ•¸å­¸", sentence: "Your favorite class is math.", trans: "ä½ æœ€å–œæ­¡æ•¸å­¸èª²ã€‚", emoji: "â•" },

            // Part 8
            { id: 71, part: 8, word: "PE", meaning: "é«”è‚²èª²", sentence: "His favorite class is PE.", trans: "ä»–æœ€å–œæ­¡é«”è‚²èª²ã€‚", emoji: "ğŸ¤¸" },
            { id: 72, part: 8, word: "ask", meaning: "å•", sentence: "Can I ask him a question?", trans: "æˆ‘å¯ä»¥å•ä»–å•é¡Œå—?", emoji: "ğŸ™‹" },
            { id: 73, part: 8, word: "correct", meaning: "æ­£ç¢ºçš„", sentence: "Your answer is correct.", trans: "ä½ ç­”å°äº†ã€‚", emoji: "âœ…" },
            { id: 74, part: 8, word: "answer", meaning: "ç­”æ¡ˆ", sentence: "Their answers are wrong.", trans: "ä»–å€‘çš„ç­”æ¡ˆéŒ¯äº†ã€‚", emoji: "ğŸ“" },
            { id: 75, part: 8, word: "copy", meaning: "æŠ„å¯«", sentence: "Please copy the answers on the blackboard.", trans: "è«‹æŠ„å¯«é»‘æ¿ä¸Šçš„ç­”æ¡ˆã€‚", emoji: "âœï¸" },
            { id: 76, part: 8, word: "grade", meaning: "æˆç¸¾", sentence: "I got good grades on midterm test.", trans: "æˆ‘çš„æœŸä¸­è€ƒè€ƒå¾—å¾ˆä¸éŒ¯ã€‚", emoji: "ğŸ’¯" },
            { id: 77, part: 8, word: "homework", meaning: "å›å®¶åŠŸèª²", sentence: "He has too much homework to do.", trans: "ä»–æœ‰å¾ˆå¤šå›å®¶åŠŸèª²è¦å¯«ã€‚", emoji: "ğŸ " },
            { id: 78, part: 8, word: "learn", meaning: "å­¸ç¿’", sentence: "We live and learn.", trans: "æ´»åˆ°è€å­¸åˆ°è€ã€‚", emoji: "ğŸ§ " },
            { id: 79, part: 8, word: "practice", meaning: "ç·´ç¿’", sentence: "He needs to practice more.", trans: "ä»–éœ€è¦å¤šä¸€é»ç·´ç¿’ã€‚", emoji: "â›¹ï¸" },
            { id: 80, part: 8, word: "question", meaning: "å•é¡Œ", sentence: "Do you have any questions?", trans: "é‚„æœ‰ä»»ä½•å•é¡Œå—?", emoji: "â“" },

            // Part 9
            { id: 81, part: 9, word: "read", meaning: "é–±è®€", sentence: "He reads the newspaper everyday.", trans: "ä»–æ¯å¤©é–±è®€å ±ç´™ã€‚", emoji: "ğŸ“–" },
            { id: 82, part: 9, word: "repeat", meaning: "é‡è¤‡", sentence: "Please repeat after the teacher.", trans: "è«‹è·Ÿè‘—è€å¸«é‡è¤‡ã€‚", emoji: "ğŸ”" },
            { id: 83, part: 9, word: "spell", meaning: "æ‹¼å­—", sentence: "He knows how to spell his name.", trans: "ä»–çŸ¥é“æ€éº¼æ‹¼ä»–çš„åå­—ã€‚", emoji: "ğŸ”¤" },
            { id: 84, part: 9, word: "unit", meaning: "å–®å…ƒ", sentence: "There are 5 units in this book.", trans: "é€™æœ¬æ›¸æœ‰5å€‹å–®å…ƒã€‚", emoji: "ğŸ“‘" },
            { id: 85, part: 9, word: "teach", meaning: "æ•™å°", sentence: "Can you teach me how to ride a bike?", trans: "ä½ å¯ä»¥æ•™æˆ‘æ€éº¼é¨è…³è¸è»Šå—?", emoji: "ğŸ‘¨â€ğŸ«" },
            { id: 86, part: 9, word: "test", meaning: "è€ƒè©¦", sentence: "They have a math test tomorrow.", trans: "ä»–å€‘æ˜å¤©æœ‰æ•¸å­¸è€ƒè©¦ã€‚", emoji: "ğŸ“" },
            { id: 87, part: 9, word: "quiz", meaning: "æ¸¬é©—", sentence: "She has a vocabulary quiz next week.", trans: "ä¸‹å€‹ç¦®æ‹œå¥¹æœ‰å–®å­—æ¸¬é©—ã€‚", emoji: "âœï¸" },
            { id: 88, part: 9, word: "understand", meaning: "ç†è§£", sentence: "Do you understand?", trans: "ä½ æ˜ç™½å—?", emoji: "ğŸ’¡" },
            { id: 89, part: 9, word: "write", meaning: "å¯«", sentence: "She writes very well.", trans: "å¥¹å¯«å¾—éå¸¸å¥½ã€‚", emoji: "âœï¸" },
            { id: 90, part: 9, word: "airport", meaning: "æ©Ÿå ´", sentence: "We took a taxi to the airport last night.", trans: "æ˜¨æ™šæˆ‘å€‘æ­è¨ˆç¨‹è»Šå»æ©Ÿå ´ã€‚", emoji: "âœˆï¸" },

            // Part 10
            { id: 91, part: 10, word: "bakery", meaning: "éºµåŒ…åº—", sentence: "My mom buys bread at this bakery.", trans: "æˆ‘åª½åª½åœ¨é€™å®¶éºµåŒ…åº—è²·éºµåŒ…ã€‚", emoji: "ğŸ¥¯" },
            { id: 92, part: 10, word: "bank", meaning: "éŠ€è¡Œ", sentence: "My dad works in a bank.", trans: "æˆ‘çˆ¸çˆ¸åœ¨éŠ€è¡Œå·¥ä½œã€‚", emoji: "ğŸ¦" },
            { id: 93, part: 10, word: "bookstore", meaning: "æ›¸åº—", sentence: "My uncle bought a book at the new bookstore.", trans: "æˆ‘å”å”åœ¨æ–°æ›¸åº—è²·äº†ä¸€æœ¬æ›¸ã€‚", emoji: "ğŸ“š" },
            { id: 94, part: 10, word: "student", meaning: "å­¸ç”Ÿ", sentence: "My aunt is a college student.", trans: "æˆ‘çš„é˜¿å§¨æ˜¯å¤§å­¸ç”Ÿã€‚", emoji: "ğŸ“" },
            { id: 95, part: 10, word: "department store", meaning: "ç™¾è²¨å…¬å¸", sentence: "He lives near the department store.", trans: "ä»–ä½åœ¨é€™å®¶ç™¾è²¨å…¬å¸é™„è¿‘ã€‚", emoji: "ğŸ¬" },
            { id: 96, part: 10, word: "hospital", meaning: "é†«é™¢", sentence: "His dad works for the hospital.", trans: "ä»–çš„çˆ¸çˆ¸åœ¨é†«é™¢ä¸Šç­ã€‚", emoji: "ğŸ¥" },
            { id: 97, part: 10, word: "internet", meaning: "ç¶²è·¯", sentence: "You spend too much time on the internet.", trans: "ä½ èŠ±å¤ªå¤šæ™‚é–“ä¸Šç¶²äº†ã€‚", emoji: "ğŸŒ" },
            { id: 98, part: 10, word: "library", meaning: "åœ–æ›¸é¤¨", sentence: "His sister likes to read in the school library.", trans: "ä»–å§å§å–œæ­¡åœ¨å­¸æ ¡åœ–æ›¸é¤¨è®€æ›¸ã€‚", emoji: "ğŸ›ï¸" },
            { id: 99, part: 10, word: "office", meaning: "è¾¦å…¬å®¤", sentence: "The homeroom teacher is in the office.", trans: "å°å¸«æ­£åœ¨è¾¦å…¬å®¤ã€‚", emoji: "ğŸ¢" },
            { id: 100, part: 10, word: "park", meaning: "å…¬åœ’", sentence: "They play baseball in the park.", trans: "ä»–å€‘åœ¨å…¬åœ’æ‰“æ£’çƒã€‚", emoji: "ğŸŒ³" },

            // Part 11
            { id: 101, part: 11, word: "place", meaning: "åœ°æ–¹", sentence: "The library is a good place to study.", trans: "åœ–æ›¸é¤¨æ˜¯è®€æ›¸çš„å¥½åœ°æ–¹ã€‚", emoji: "ğŸ“" },
            { id: 102, part: 11, word: "post office", meaning: "éƒµå±€", sentence: "His uncle works in the post office.", trans: "ä»–çš„å”å”åœ¨éƒµå±€å·¥ä½œã€‚", emoji: "ğŸ“®" },
            { id: 103, part: 11, word: "restaurant", meaning: "é¤å»³", sentence: "His aunt owns a restaurant.", trans: "ä»–çš„ä¼¯æ¯æ“æœ‰ä¸€å®¶é¤å»³ã€‚", emoji: "ğŸ½ï¸" },
            { id: 104, part: 11, word: "restroom", meaning: "å»æ‰€", sentence: "Excuse me. May I go to the restroom?", trans: "ä¸å¥½æ„æ€,æˆ‘å¯ä»¥å»ä¸€ä¸‹æ´—æ‰‹é–“å—?", emoji: "ğŸš»" },
            { id: 105, part: 11, word: "road", meaning: "é¦¬è·¯", sentence: "Drive carefully on the road.", trans: "å°å¿ƒé§•é§›ã€‚", emoji: "ğŸ›£ï¸" },
            { id: 106, part: 11, word: "shop", meaning: "å•†åº—", sentence: "The shop opens at 9 o'clock.", trans: "é€™å®¶å•†åº—ä¹é»é–‹å§‹ç‡Ÿæ¥­ã€‚", emoji: "ğŸª" },
            { id: 107, part: 11, word: "station", meaning: "è»Šç«™", sentence: "Where is the train station?", trans: "ç«è»Šç«™åœ¨å“ªè£¡?", emoji: "ğŸš‰" },
            { id: 108, part: 11, word: "store", meaning: "åº—å®¶", sentence: "He goes to the convenience store every morning.", trans: "ä»–æ¯å¤©æ—©ä¸Šå»ä¾¿åˆ©å•†åº—ã€‚", emoji: "ğŸª" },
            { id: 109, part: 11, word: "street", meaning: "è¡—é“", sentence: "Don't play in the street.", trans: "ä¸è¦åœ¨è¡—é“ä¸Šç©è€ã€‚", emoji: "ğŸ™ï¸" },
            { id: 110, part: 11, word: "supermarket", meaning: "è¶…ç´šå¸‚å ´", sentence: "The supermarket is very big.", trans: "é€™å€‹è¶…ç´šå¸‚å ´éå¸¸å¤§ã€‚", emoji: "ğŸ›’" },

            // Part 12
            { id: 111, part: 12, word: "theater", meaning: "æˆ²é™¢", sentence: "We don't have a movie theater.", trans: "æˆ‘å€‘æ²’æœ‰é›»å½±é™¢ã€‚", emoji: "ğŸ­" },
            { id: 112, part: 12, word: "zoo", meaning: "å‹•ç‰©åœ’", sentence: "How often do you go to the zoo?", trans: "ä½ å¤šå¸¸å»å‹•ç‰©åœ’å‘¢?", emoji: "ğŸ¦" },
            { id: 113, part: 12, word: "tall", meaning: "é«˜çš„", sentence: "Chien-Ming Wang is 193 centimeters tall.", trans: "ç‹å»ºæ°‘èº«é«˜193å…¬åˆ†ã€‚", emoji: "ğŸ¦’" },
            { id: 114, part: 12, word: "thin", meaning: "ç˜¦çš„", sentence: "The dancer is thin.", trans: "é‚£å€‹èˆè€…å¾ˆç˜¦ã€‚", emoji: "ğŸ•´ï¸" },
            { id: 115, part: 12, word: "front", meaning: "å‰é¢çš„", sentence: "She wants to sit in the front of the class.", trans: "å¥¹æƒ³è¦ååœ¨æ•™å®¤çš„å‰é¢ã€‚", emoji: "â¬†ï¸" },
            { id: 116, part: 12, word: "here", meaning: "é€™è£¡", sentence: "She is not here anymore.", trans: "å¥¹ä¸å†åœ¨é€™è£¡äº†ã€‚", emoji: "ğŸ‘‡" },
            { id: 117, part: 12, word: "left", meaning: "å·¦é‚Š", sentence: "Please move to the left a little.", trans: "è«‹å‘å·¦é‚Šç¨å¾®ç§»å‹•ã€‚", emoji: "â¬…ï¸" },
            { id: 118, part: 12, word: "right", meaning: "å³é‚Š/æ­£ç¢º", sentence: "Turn right, and you'll see the bus stop.", trans: "å³è½‰,ç„¶å¾Œä½ æœƒçœ‹åˆ°å…¬è»Šç«™ç‰Œã€‚", emoji: "â¡ï¸" },
            { id: 119, part: 12, word: "there", meaning: "é‚£è£¡", sentence: "I'll always be right there.", trans: "æˆ‘æ°¸é éƒ½åœ¨ã€‚", emoji: "ğŸ‘‰" },
            { id: 120, part: 12, word: "airplane", meaning: "é£›æ©Ÿ", sentence: "I traveled to America by airplane.", trans: "æˆ‘æ­é£›æ©Ÿå»ç¾åœ‹æ—…è¡Œã€‚", emoji: "âœˆï¸" },

            // Part 13
            { id: 121, part: 13, word: "bicycle", meaning: "è…³è¸è»Š", sentence: "She rides a bicycle to school.", trans: "å¥¹é¨è…³è¸è»Šä¸Šå­¸ã€‚", emoji: "ğŸš²" },
            { id: 122, part: 13, word: "boat", meaning: "å°èˆ¹", sentence: "We can get to Green Island by boat.", trans: "æˆ‘å€‘å¯ä»¥æ­å°èˆ¹å»ç¶ å³¶ã€‚", emoji: "ğŸš¤" },
            { id: 123, part: 13, word: "bus", meaning: "å…¬è»Š", sentence: "You can take a bus to Taipei.", trans: "ä½ å¯ä»¥æ­å…¬è»Šåˆ°å°åŒ—ã€‚", emoji: "ğŸšŒ" },
            { id: 124, part: 13, word: "car", meaning: "æ±½è»Š", sentence: "Her mom can drive a car.", trans: "å¥¹çš„åª½åª½æœƒé–‹è»Šã€‚", emoji: "ğŸš—" },
            { id: 125, part: 13, word: "taxi", meaning: "è¨ˆç¨‹è»Š", sentence: "Her dad is a taxi driver.", trans: "å¥¹çš„çˆ¸çˆ¸æ˜¯è¨ˆç¨‹è»Šå¸æ©Ÿã€‚", emoji: "ğŸš•" },
            { id: 126, part: 13, word: "motorcycle", meaning: "æ‘©æ‰˜è»Š", sentence: "His uncle loves to ride his motorcycle.", trans: "ä»–çš„ä¼¯çˆ¶å–œæ­¡é¨ä»–çš„æ‘©æ‰˜è»Šã€‚", emoji: "ğŸ›µ" },
            { id: 127, part: 13, word: "van", meaning: "å»‚å‹è»Š", sentence: "His aunt has a big van.", trans: "ä»–çš„ä¼¯æ¯æœ‰è¼›å¾ˆå¤§çš„å»‚å‹è»Šã€‚", emoji: "ğŸš" },
            { id: 128, part: 13, word: "train", meaning: "ç«è»Š", sentence: "His sister goes to school by train.", trans: "ä»–çš„å§Šå§Šæ­ç«è»Šä¸Šå­¸ã€‚", emoji: "ğŸš†" },
            { id: 129, part: 13, word: "truck", meaning: "è²¨è»Š", sentence: "His parents drive a truck to work.", trans: "ä»–çš„çˆ¶æ¯é–‹è²¨è»Šå»å·¥ä½œã€‚", emoji: "ğŸšš" },
            { id: 130, part: 13, word: "drive", meaning: "é§•é§›", sentence: "He can't drive a car yet.", trans: "ä»–é‚„ä¸æœƒé–‹è»Šã€‚", emoji: "ğŸš˜" },

            // Part 14
            { id: 131, part: 14, word: "fly", meaning: "é£›ç¿”", sentence: "An airplane can't fly into space.", trans: "é£›æ©Ÿä¸èƒ½é£›åˆ°å¤ªç©ºã€‚", emoji: "ğŸ•Šï¸" },
            { id: 132, part: 14, word: "map", meaning: "åœ°åœ–", sentence: "Dora uses the map to explore.", trans: "Doraç”¨åœ°åœ–æ¢éšªã€‚", emoji: "ğŸ—ºï¸" },
            { id: 133, part: 14, word: "ride", meaning: "é¨ä¹˜", sentence: "It's fun to ride a bike.", trans: "é¨è…³è¸è»Šå¾ˆæœ‰è¶£ã€‚", emoji: "ğŸš´" },
            { id: 134, part: 14, word: "turn", meaning: "è½‰", sentence: "Turn your head to the left and you'll see it.", trans: "ä½ å¾€å·¦é‚Šçœ‹å°±æœƒçœ‹åˆ°äº†ã€‚", emoji: "â†©ï¸" },
            { id: 135, part: 14, word: "basket", meaning: "ç±ƒå­", sentence: "Don't put your eggs in one basket.", trans: "é›è›‹ä¸è¦æ”¾åœ¨åŒä¸€å€‹ç±ƒå­è£¡ã€‚", emoji: "ğŸ§º" },
            { id: 136, part: 14, word: "box", meaning: "ç®±å­", sentence: "She wants a new pencil box.", trans: "å¥¹æƒ³è¦ä¸€å€‹æ–°çš„é‰›ç­†ç›’ã€‚", emoji: "ğŸ“¦" },
            { id: 137, part: 14, word: "can", meaning: "ç½/èƒ½", sentence: "He wants a can of coke.", trans: "ä»–æƒ³è¦ä¸€ç½å¯æ¨‚ã€‚", emoji: "ğŸ¥«" },
            { id: 138, part: 14, word: "piece", meaning: "å¼µ,å¡Š", sentence: "It will be a piece of cake.", trans: "é€™çœŸæ˜¯å†ç°¡å–®ä¸éäº†(ä¸€å¡Šè›‹ç³•)ã€‚", emoji: "ğŸ§©" },
            { id: 139, part: 14, word: "point", meaning: "åˆ†æ•¸/é»", sentence: "They got 10 points.", trans: "ä»–å€‘å¾—åˆ°10åˆ†ã€‚", emoji: "â˜ï¸" },
            { id: 140, part: 14, word: "big", meaning: "å¤§çš„", sentence: "It's a big world.", trans: "é€™å€‹ä¸–ç•Œå¾ˆå¯¬å»£ã€‚", emoji: "ğŸ˜" },

            // Part 15
            { id: 141, part: 15, word: "enough", meaning: "è¶³å¤ çš„", sentence: "You are good enough.", trans: "ä½ å·²ç¶“å¾ˆæ£’äº†ã€‚", emoji: "ğŸ‘Œ" },
            { id: 142, part: 15, word: "medium", meaning: "ä¸­é–“çš„/ä¸­ç­‰", sentence: "I want a medium coffee, please.", trans: "æˆ‘æƒ³è¦ä¸€æ¯ä¸­æ¯å’–å•¡ã€‚", emoji: "â˜•" },
            { id: 143, part: 15, word: "high", meaning: "é«˜çš„", sentence: "The birds can fly high.", trans: "é³¥å…’å¯ä»¥é£›å¾—å¾ˆé«˜ã€‚", emoji: "ğŸ”ï¸" },
            { id: 144, part: 15, word: "low", meaning: "ä½çš„", sentence: "The plane is flying very low.", trans: "é€™è¼›é£›æ©Ÿé£›å¾—å¾ˆä½ã€‚", emoji: "ğŸ“‰" },
            { id: 145, part: 15, word: "full", meaning: "æ»¿çš„/é£½çš„", sentence: "Stop eating when you are full.", trans: "ç•¶ä½ å·²ç¶“é£½äº†å°±åˆ¥å†åƒæ±è¥¿äº†ã€‚", emoji: "ğŸŒ•" },
            { id: 146, part: 15, word: "short", meaning: "çŸ­çš„/çŸ®çš„", sentence: "His hair is short.", trans: "ä»–æ˜¯çŸ­é ­é«®ã€‚", emoji: "ğŸ“" },
            { id: 147, part: 15, word: "small", meaning: "å°çš„", sentence: "This classroom is too small.", trans: "æ•™å®¤å¤ªå°äº†ã€‚", emoji: "ğŸ" },
            { id: 148, part: 15, word: "line", meaning: "éšŠä¼,åˆ—,ç·š", sentence: "Line up, please.", trans: "è«‹æ’éšŠã€‚", emoji: "ã€°ï¸" },
            { id: 149, part: 15, word: "America", meaning: "ç¾åœ‹", sentence: "I have never been to America.", trans: "æˆ‘å¾ä¾†æ²’å»éç¾åœ‹ã€‚", emoji: "ğŸ‡ºğŸ‡¸" },
            { id: 150, part: 15, word: "American", meaning: "ç¾åœ‹çš„/äºº", sentence: "Do you like American food?", trans: "ä½ å–œæ­¡ç¾åœ‹é£Ÿç‰©å—?", emoji: "ğŸ”" }
        ];

        const Flashcard = ({ item, speak }) => {
            const [isFlipped, setIsFlipped] = useState(false);

            return (
                <div 
                    className="relative w-full h-80 perspective-1000 cursor-pointer group"
                    onClick={() => setIsFlipped(!isFlipped)}
                >
                    <div className={`relative w-full h-full duration-500 preserve-3d transition-transform ${isFlipped ? 'rotate-y-180' : ''}`} 
                        style={{ transformStyle: 'preserve-3d', transform: isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)' }}>
                        
                        {/* Front */}
                        <div className="absolute w-full h-full bg-white rounded-3xl shadow-md hover:shadow-xl transition-all flex flex-col items-center justify-center p-4 backface-hidden border-b-8 border-blue-200">
                            <div className="absolute top-4 left-4 text-xs font-bold text-gray-300">
                                Part {item.part}
                            </div>
                            <div className="text-6xl mb-4 transform group-hover:scale-110 transition-transform">{item.emoji}</div>
                            <h2 className="text-3xl font-bold text-gray-800 mb-2 text-center">{item.word}</h2>
                            <p className="text-gray-400 text-xs mt-2 bg-gray-50 px-3 py-1 rounded-full">é»æ“Šç¿»ç‰Œ</p>
                            <button 
                                onClick={(e) => { e.stopPropagation(); speak(item.word); }}
                                className="absolute bottom-4 right-4 p-3 bg-blue-50 rounded-full text-blue-500 hover:bg-blue-100 transition-colors"
                            >
                                <Volume2 size={20} />
                            </button>
                        </div>

                        {/* Back */}
                        <div className="absolute w-full h-full bg-gradient-to-br from-blue-50 to-indigo-50 rounded-3xl shadow-md flex flex-col items-center justify-center p-4 backface-hidden rotate-y-180 border-b-8 border-indigo-200"
                            style={{ backfaceVisibility: 'hidden', transform: 'rotateY(180deg)' }}>
                            <h3 className="text-2xl font-bold text-indigo-600 mb-2">{item.meaning}</h3>
                            
                            <div className="text-center w-full bg-white p-3 rounded-xl shadow-sm border border-indigo-100 mb-4">
                                <p className="text-sm text-gray-700 font-medium mb-1 leading-relaxed">
                                    {item.sentence}
                                </p>
                                <p className="text-xs text-gray-500">
                                    {item.trans}
                                </p>
                            </div>

                            <button 
                                onClick={(e) => { e.stopPropagation(); speak(item.sentence); }}
                                className="p-2 bg-white rounded-full text-indigo-600 hover:bg-indigo-100 transition-colors flex items-center gap-1 font-bold px-4 text-xs shadow-sm border border-indigo-100"
                            >
                                <Volume2 size={16} />
                                å”¸ä¾‹å¥
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        function App() {
            const [activeTab, setActiveTab] = useState('learn'); // learn, list, quiz
            const [selectedPart, setSelectedPart] = useState('all'); // 'all', 1, 2, ... 15
            const [searchTerm, setSearchTerm] = useState('');
            
            // Learn Mode State
            const [currentCardIndex, setCurrentCardIndex] = useState(0);

            // Quiz Mode State
            const [quizScore, setQuizScore] = useState(0);
            const [quizQuestion, setQuizQuestion] = useState(null);
            const [quizState, setQuizState] = useState('idle'); // idle, answered
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [questionCount, setQuestionCount] = useState(0); // ç›®å‰ç¬¬å¹¾é¡Œ
            const [isQuizOver, setIsQuizOver] = useState(false);   // æ˜¯å¦çµæŸ
            const [quizQueue, setQuizQueue] = useState([]); // æ–°å¢ï¼šæ¸¬é©—éšŠåˆ—

            // Filter Data based on selected Part
            const filteredData = useMemo(() => {
                let data = fullVocabularyData;
                if (selectedPart !== 'all') {
                    data = data.filter(item => item.part === parseInt(selectedPart));
                }
                return data;
            }, [selectedPart]);

            // Search Data (only for List view)
            const searchData = useMemo(() => {
                return filteredData.filter(item => 
                    item.word.toLowerCase().includes(searchTerm.toLowerCase()) || 
                    item.meaning.includes(searchTerm)
                );
            }, [filteredData, searchTerm]);

            const speak = (text) => {
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    window.speechSynthesis.speak(utterance);
                }
            };

            // --- Quiz Mode Functions ---
            
            // é–‹å§‹/é‡ç½®æ¸¬é©—
            const startQuiz = () => {
                // æª¢æŸ¥æ˜¯å¦å–®å­—é‡å¤ªå°‘
                if (filteredData.length < 4) {
                    alert("å–®å­—é‡ä¸è¶³ï¼Œè«‹é¸æ“‡ 'All' æˆ–åŒ…å«æ›´å¤šå–®å­—çš„å–®å…ƒï¼");
                    return;
                }

                setQuizScore(0);
                setQuestionCount(0);
                setIsQuizOver(false);
                setQuizState('idle');
                
                // ç”¢ç”Ÿä¸é‡è¤‡çš„é¡Œåº«éšŠåˆ— (éš¨æ©Ÿæ´—ç‰Œå¾Œå–å‰ 10 å€‹)
                const shuffled = [...filteredData].sort(() => 0.5 - Math.random());
                const newQueue = shuffled.slice(0, 10);
                setQuizQueue(newQueue);

                generateQuestion(0, newQueue); // å‚³å…¥ 0 ä»£è¡¨æ˜¯ç¬¬ä¸€é¡Œï¼Œä¸¦å‚³å…¥æ–°éšŠåˆ—
            };

            const generateQuestion = (index, currentQueue = quizQueue) => {
                // æª¢æŸ¥æ˜¯å¦å·²ç¶“ 10 é¡Œäº† æˆ– è¶…å‡ºéšŠåˆ—é•·åº¦
                if (index >= 10 || index >= currentQueue.length) {
                    setIsQuizOver(true);
                    return;
                }

                const correctWord = currentQueue[index];
                
                // éŒ¯èª¤é¸é … (å¾ filteredData ä¸­æŒ‘é¸ï¼Œæ’é™¤æ­£ç¢ºç­”æ¡ˆ)
                const wrongAnswers = filteredData
                    .filter(item => item.id !== correctWord.id)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3);
                
                const options = [...wrongAnswers, correctWord].sort(() => 0.5 - Math.random());
                
                setQuizQuestion({ target: correctWord, options: options });
                setQuizState('idle');
                setSelectedAnswer(null);
                setQuestionCount(index + 1); // è¨­å®šç‚ºç•¶å‰é¡Œè™Ÿ (1-based)
            };

            const handleAnswer = (answer) => {
                if (quizState === 'answered') return;
                setSelectedAnswer(answer);
                setQuizState('answered');
                if (answer.id === quizQuestion.target.id) {
                    setQuizScore(prev => prev + 10);
                    speak(quizQuestion.target.word); // åªå”¸å–®å­—ï¼Œä¸å”¸ Correct
                } else {
                    speak("Try again.");
                }
            };

            // ç•¶åˆ‡æ›åˆ° Quiz åˆ†é æˆ–æ˜¯åˆ‡æ›å–®å…ƒæ™‚ï¼Œé‡ç½®æ¸¬é©—
            useEffect(() => {
                if (activeTab === 'quiz') {
                    startQuiz();
                }
                // eslint-disable-next-line react-hooks/exhaustive-deps
            }, [activeTab, selectedPart]);

            return (
                <div className="min-h-screen bg-indigo-50 font-sans text-gray-800 pb-20">
                    {/* Header */}
                    <header className="bg-gradient-to-r from-blue-500 to-indigo-600 p-4 shadow-lg sticky top-0 z-20">
                        <div className="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                            <div className="flex items-center gap-2">
                                <Star className="text-yellow-300 fill-current w-8 h-8 animate-spin-slow" />
                                <h1 className="text-2xl font-bold text-white tracking-wider">
                                    å°å…­è‹±æ–‡å–®å­—ç‹
                                </h1>
                            </div>
                            
                            <div className="flex items-center gap-2 bg-white/20 p-1 rounded-lg backdrop-blur-sm">
                                <Filter size={18} className="text-white ml-2" />
                                <select 
                                    value={selectedPart} 
                                    onChange={(e) => setSelectedPart(e.target.value)}
                                    className="bg-transparent text-white font-bold p-1 outline-none cursor-pointer border-none"
                                >
                                    <option className="text-gray-800" value="all">å…¨éƒ¨å–®å…ƒ (1-15)</option>
                                    {Array.from({length: 15}, (_, i) => (
                                        <option key={i+1} className="text-gray-800" value={i+1}>Part {i+1}</option>
                                    ))}
                                </select>
                                <div className="text-xs font-bold text-indigo-800 bg-yellow-300 px-2 py-1 rounded-md mr-1">
                                    {filteredData.length} å­—
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-4xl mx-auto p-4 mt-4">
                        
                        {/* Navigation Tabs */}
                        <div className="flex justify-center gap-2 md:gap-4 mb-8">
                            {[
                                { id: 'learn', icon: BookOpen, label: 'èƒŒå–®å­—', color: 'blue' },
                                { id: 'list', icon: ListIcon, label: 'å–®å­—è¡¨', color: 'green' },
                                { id: 'quiz', icon: Gamepad2, label: 'å°æ¸¬é©—', color: 'purple' }
                            ].map(tab => (
                                <button 
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex items-center gap-2 px-4 md:px-6 py-3 rounded-2xl font-bold transition-all transform hover:scale-105 shadow-sm
                                        ${activeTab === tab.id 
                                        ? `bg-${tab.color}-500 text-white shadow-${tab.color}-300 ring-4 ring-${tab.color}-100` 
                                        : 'bg-white text-gray-500 hover:bg-gray-50'}`}
                                >
                                    <tab.icon size={20} />
                                    {tab.label}
                                </button>
                            ))}
                        </div>

                        {/* --- Content: Flashcards (Learn Mode) - GRID VIEW --- */}
                        {activeTab === 'learn' && filteredData.length > 0 && (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-8">
                                {filteredData.map(item => (
                                    <Flashcard key={item.id} item={item} speak={speak} />
                                ))}
                            </div>
                        )}

                        {/* --- Content: List View --- */}
                        {activeTab === 'list' && (
                            <div className="bg-white rounded-3xl shadow-lg overflow-hidden border border-gray-100">
                                {/* ... list content ... */}
                                <div className="p-4 bg-gray-50 border-b border-gray-100 flex items-center gap-2">
                                    <Search className="text-gray-400" />
                                    <input 
                                        type="text" 
                                        placeholder="æœå°‹å–®å­—..." 
                                        className="bg-transparent outline-none w-full text-lg"
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                    />
                                </div>
                                <div className="grid grid-cols-12 bg-gray-50/50 p-4 font-bold text-gray-500 border-b text-sm md:text-base">
                                    <div className="col-span-1 hidden md:block">Part</div>
                                    <div className="col-span-4 md:col-span-3">å–®å­—</div>
                                    <div className="col-span-3 md:col-span-2">ä¸­æ–‡</div>
                                    <div className="col-span-4 md:col-span-5">ä¾‹å¥</div>
                                    <div className="col-span-1 text-center">éŸ³</div>
                                </div>
                                <div className="divide-y divide-gray-100 max-h-[65vh] overflow-y-auto no-scrollbar">
                                    {searchData.map((item) => (
                                        <div key={item.id} className="grid grid-cols-12 p-4 hover:bg-indigo-50 transition-colors items-center text-sm md:text-base group">
                                            <div className="col-span-1 text-gray-300 font-mono hidden md:block">{item.part}</div>
                                            <div className="col-span-4 md:col-span-3 font-bold text-gray-800 flex items-center gap-2">
                                                <span className="text-xl">{item.emoji}</span>
                                                <span className="group-hover:text-indigo-600 transition-colors">{item.word}</span>
                                            </div>
                                            <div className="col-span-3 md:col-span-2 text-indigo-600 font-medium">{item.meaning}</div>
                                            <div className="col-span-4 md:col-span-5 text-gray-600">
                                                <div className="mb-1 truncate">{item.sentence}</div>
                                                <div className="text-gray-400 text-xs hidden md:block truncate">{item.trans}</div>
                                            </div>
                                            <div className="col-span-1 flex justify-center">
                                                <button 
                                                    onClick={() => speak(item.word)}
                                                    className="p-2 text-indigo-300 hover:text-indigo-600 hover:bg-indigo-100 rounded-full transition-colors"
                                                >
                                                    <Volume2 size={18} />
                                                </button>
                                            </div>
                                        </div>
                                    ))}
                                    {searchData.length === 0 && (
                                        <div className="p-8 text-center text-gray-400">
                                            æ²’æœ‰æ‰¾åˆ°ç›¸é—œå–®å­—ï¼Œè©¦è©¦çœ‹åˆ¥çš„é—œéµå­—ï¼Ÿ
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* --- Content: Quiz Mode (UPDATED) --- */}
                        {activeTab === 'quiz' && (
                            <div className="max-w-md mx-auto">
                                {!isQuizOver && quizQuestion ? (
                                    <div className="bg-white rounded-3xl shadow-xl p-8 border-b-8 border-purple-200 relative overflow-hidden">
                                        {/* Progress Bar & Score */}
                                        <div className="absolute top-0 left-0 w-full h-2 bg-purple-50">
                                            <div 
                                                className="h-full bg-purple-500 transition-all duration-300"
                                                style={{ width: `${(questionCount / 10) * 100}%` }}
                                            ></div>
                                        </div>
                                        
                                        <div className="flex justify-between items-center mb-6 mt-2">
                                            <span className="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-bold">
                                                ç¬¬ {questionCount} / 10 é¡Œ
                                            </span>
                                            <div className="flex items-center gap-2 text-purple-700 font-bold">
                                                <Trophy size={20} />
                                                <span>å¾—åˆ†: {quizScore}</span>
                                            </div>
                                        </div>

                                        <div className="text-center mb-8">
                                            <h3 className="text-2xl font-bold text-gray-800 mb-2 leading-tight">
                                                <span className="text-purple-600 block text-4xl mb-2">{quizQuestion.target.meaning}</span> 
                                                çš„è‹±æ–‡æ˜¯ï¼Ÿ
                                            </h3>
                                        </div>

                                        <div className="grid grid-cols-1 gap-3">
                                            {quizQuestion.options.map((option) => {
                                                let btnClass = "w-full p-4 rounded-xl font-bold text-lg text-left transition-all transform flex items-center justify-between border-2 ";
                                                
                                                if (quizState === 'answered') {
                                                    if (option.id === quizQuestion.target.id) {
                                                        btnClass += "bg-green-100 border-green-500 text-green-700";
                                                    } else if (selectedAnswer?.id === option.id) {
                                                        btnClass += "bg-red-100 border-red-500 text-red-700";
                                                    } else {
                                                        btnClass += "bg-gray-50 border-gray-100 text-gray-400 opacity-50";
                                                    }
                                                } else {
                                                    btnClass += "bg-white border-gray-100 hover:border-purple-400 hover:bg-purple-50 text-gray-700 shadow-sm hover:scale-[1.02]";
                                                }

                                                return (
                                                    <button
                                                        key={option.id}
                                                        onClick={() => handleAnswer(option)}
                                                        disabled={quizState === 'answered'}
                                                        className={btnClass}
                                                    >
                                                        <div className="flex items-center gap-3">
                                                            <span className="text-2xl filter grayscale-[50%]">{option.emoji}</span>
                                                            <span>{option.word}</span>
                                                        </div>
                                                        {quizState === 'answered' && option.id === quizQuestion.target.id && <CheckCircle className="text-green-600" />}
                                                        {quizState === 'answered' && selectedAnswer?.id === option.id && option.id !== quizQuestion.target.id && <XCircle className="text-red-600" />}
                                                    </button>
                                                );
                                            })}
                                        </div>

                                        {quizState === 'answered' && (
                                            <div className="mt-6 text-center animate-bounce-in">
                                                <button 
                                                    onClick={() => generateQuestion(questionCount)}
                                                    className="bg-purple-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-purple-700 hover:shadow-purple-300 transition-all flex items-center gap-2 mx-auto active:transform active:scale-95"
                                                >
                                                    {questionCount < 10 ? (
                                                        <>
                                                            <RefreshCcw size={20} />
                                                            ä¸‹ä¸€é¡Œ
                                                        </>
                                                    ) : (
                                                        <>
                                                            <Trophy size={20} />
                                                            çœ‹æˆç¸¾
                                                        </>
                                                    )}
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                ) : isQuizOver ? (
                                    // Game Over Screen
                                    <div className="bg-white rounded-3xl shadow-xl p-8 border-b-8 border-yellow-200 text-center animate-fade-in">
                                        <div className="mb-6">
                                            <div className="inline-block p-6 rounded-full bg-yellow-100 mb-4">
                                                <Trophy size={64} className="text-yellow-500" />
                                            </div>
                                            <h2 className="text-3xl font-bold text-gray-800 mb-2">æ¸¬é©—å®Œæˆï¼</h2>
                                            <p className="text-gray-500">
                                                å–®å…ƒ: {selectedPart === 'all' ? 'å…¨éƒ¨' : `Part ${selectedPart}`}
                                            </p>
                                        </div>

                                        <div className="bg-gray-50 rounded-2xl p-6 mb-8 border border-gray-100">
                                            <div className="text-gray-500 text-sm mb-1">ä½ çš„å¾—åˆ†</div>
                                            <div className="text-6xl font-black text-purple-600 mb-2">{quizScore}</div>
                                            <div className="text-sm font-bold text-gray-400">ç¸½åˆ† 100 åˆ†</div>
                                        </div>

                                        <div className="text-xl font-bold text-gray-700 mb-8">
                                            {quizScore === 100 ? "ğŸ‰ å¤ªå²å®³äº†ï¼å…¨éƒ¨ç­”å°ï¼" : 
                                            quizScore >= 80 ? "ğŸŒŸ å¾ˆæ£’å–”ï¼ç¹¼çºŒä¿æŒï¼" :
                                            quizScore >= 60 ? "ğŸ‘ ä¸éŒ¯å–”ï¼å†åŠ æ²¹ä¸€ä¸‹ï¼" :
                                            "ğŸ’ª æ²’é—œä¿‚ï¼Œå¤šç·´ç¿’å¹¾æ¬¡å°±æœƒäº†ï¼"}
                                        </div>

                                        <button 
                                            onClick={startQuiz}
                                            className="w-full bg-yellow-400 text-yellow-900 px-8 py-4 rounded-xl font-bold shadow-lg hover:bg-yellow-300 transition-all flex items-center justify-center gap-2 active:transform active:scale-95"
                                        >
                                            <RefreshCcw size={24} />
                                            å†æŒ‘æˆ°ä¸€æ¬¡
                                        </button>
                                    </div>
                                ) : null}
                            </div>
                        )}
                    </main>

                    <footer className="fixed bottom-0 w-full text-center p-3 text-gray-400 text-xs bg-white/80 backdrop-blur-md border-t border-gray-100">
                        Grade 6 Vocabulary Builder â€¢ Learning is Fun!
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


